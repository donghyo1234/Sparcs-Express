{"ast":null,"code":"var _jsxFileName = \"E:\\\\Sparcs-Express\\\\sparcs-database-seminar\\\\sparcs-node-express-seminar\\\\client\\\\src\\\\pages\\\\feed.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport axios from \"axios\";\nimport { SAPIBase } from \"../tools/api\";\nimport Header from \"../components/header\";\nimport \"./css/feed.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FeedPage = props => {\n  _s();\n  const [LAPIResponse, setLAPIResponse] = React.useState([]);\n  const [NPostCount, setNPostCount] = React.useState(0);\n  const [SNewPostTitle, setSNewPostTitle] = React.useState(\"\");\n  const [SNewPostContent, setSNewPostContent] = React.useState(\"\");\n  React.useEffect(() => {\n    let BComponentExited = false;\n    const asyncFun = async () => {\n      const {\n        data\n      } = await axios.get(SAPIBase + `/feed/getFeed?count=${NPostCount}`);\n      console.log(data);\n      // const data = [ { id: 0, title: \"test1\", content: \"Example body\" }, { id: 1, title: \"test2\", content: \"Example body\" }, { id: 2, title: \"test3\", content: \"Example body\" } ].slice(0, NPostCount);\n      if (BComponentExited) return;\n      setLAPIResponse(data);\n    };\n    asyncFun().catch(e => window.alert(`Error while running API Call: ${e}`));\n    return () => {\n      BComponentExited = true;\n    };\n  }, [NPostCount]);\n  const createNewPost = () => {\n    const asyncFun = async () => {\n      await axios.post(SAPIBase + '/feed/addFeed', {\n        title: SNewPostTitle,\n        content: SNewPostContent\n      });\n      setNPostCount(NPostCount + 1);\n      setSNewPostTitle(\"\");\n      setSNewPostContent(\"\");\n    };\n    asyncFun().catch(e => window.alert(`AN ERROR OCCURED! ${e}`));\n  };\n  const deletePost = id => {\n    const asyncFun = async () => {\n      // One can set X-HTTP-Method header to DELETE to specify deletion as well\n      await axios.post(SAPIBase + '/feed/deleteFeed', {\n        id: id\n      });\n      setNPostCount(Math.max(NPostCount - 1, 0));\n    };\n    asyncFun().catch(e => window.alert(`AN ERROR OCCURED! ${e}`));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Feed\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Feed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feed-length-input\",\n      children: [\"Number of posts to show: \\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: NPostCount,\n        id: \"post-count-input\",\n        min: 0,\n        onChange: e => setNPostCount(parseInt(e.target.value))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feed-list\",\n      children: [LAPIResponse.map((val, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feed-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"delete-item\",\n          onClick: e => deletePost(`${val.id}`),\n          children: \"\\u24E7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"feed-title\",\n          children: val.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"feed-body\",\n          children: val.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feed-item-add\",\n        children: [\"Title: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: SNewPostTitle,\n          onChange: e => setSNewPostTitle(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 18\n        }, this), \"\\xA0\\xA0\\xA0\\xA0 Content: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: SNewPostContent,\n          onChange: e => setSNewPostContent(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-add-button\",\n          onClick: e => createNewPost(),\n          children: \"Add Post!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(FeedPage, \"ZbW7vmR5RP3h6slPs4ui4A4sj+U=\");\n_c = FeedPage;\nexport default FeedPage;\nvar _c;\n$RefreshReg$(_c, \"FeedPage\");","map":{"version":3,"names":["React","axios","SAPIBase","Header","jsxDEV","_jsxDEV","FeedPage","props","_s","LAPIResponse","setLAPIResponse","useState","NPostCount","setNPostCount","SNewPostTitle","setSNewPostTitle","SNewPostContent","setSNewPostContent","useEffect","BComponentExited","asyncFun","data","get","console","log","catch","e","window","alert","createNewPost","post","title","content","deletePost","id","Math","max","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","min","onChange","parseInt","target","map","val","i","onClick","_c","$RefreshReg$"],"sources":["E:/Sparcs-Express/sparcs-database-seminar/sparcs-node-express-seminar/client/src/pages/feed.tsx"],"sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { SAPIBase } from \"../tools/api\";\nimport Header from \"../components/header\";\nimport \"./css/feed.css\";\n\ninterface IAPIResponse  { id: number, title: string, content: string }\n\nconst FeedPage = (props: {}) => {\n  const [ LAPIResponse, setLAPIResponse ] = React.useState<IAPIResponse[]>([]);\n  const [ NPostCount, setNPostCount ] = React.useState<number>(0);\n  const [ SNewPostTitle, setSNewPostTitle ] = React.useState<string>(\"\");\n  const [ SNewPostContent, setSNewPostContent ] = React.useState<string>(\"\");\n\n  React.useEffect( () => {\n    let BComponentExited = false;\n    const asyncFun = async () => {\n      const { data } = await axios.get<IAPIResponse[]>( SAPIBase + `/feed/getFeed?count=${ NPostCount }`);\n      console.log(data);\n      // const data = [ { id: 0, title: \"test1\", content: \"Example body\" }, { id: 1, title: \"test2\", content: \"Example body\" }, { id: 2, title: \"test3\", content: \"Example body\" } ].slice(0, NPostCount);\n      if (BComponentExited) return;\n      setLAPIResponse(data);\n    };\n    asyncFun().catch((e) => window.alert(`Error while running API Call: ${e}`));\n    return () => { BComponentExited = true; }\n  }, [ NPostCount ]);\n\n  const createNewPost = () => {\n    const asyncFun = async () => {\n      await axios.post( SAPIBase + '/feed/addFeed', { title: SNewPostTitle, content: SNewPostContent } );\n      setNPostCount(NPostCount + 1);\n      setSNewPostTitle(\"\");\n      setSNewPostContent(\"\");\n    }\n    asyncFun().catch(e => window.alert(`AN ERROR OCCURED! ${e}`));\n  }\n\n  const deletePost = (id: string) => {\n    const asyncFun = async () => {\n      // One can set X-HTTP-Method header to DELETE to specify deletion as well\n      await axios.post( SAPIBase + '/feed/deleteFeed', { id: id } );\n      setNPostCount(Math.max(NPostCount - 1, 0));\n    }\n    asyncFun().catch(e => window.alert(`AN ERROR OCCURED! ${e}`));\n  }\n\n  return (\n    <div className=\"Feed\">\n      <Header/>\n      <h2>Feed</h2>\n      <div className={\"feed-length-input\"}>\n        Number of posts to show: &nbsp;&nbsp;\n        <input type={\"number\"} value={ NPostCount } id={\"post-count-input\"} min={0}\n               onChange={ (e) => setNPostCount( parseInt(e.target.value) ) }\n        />\n      </div>\n      <div className={\"feed-list\"}>\n        { LAPIResponse.map( (val, i) =>\n          <div key={i} className={\"feed-item\"}>\n            <div className={\"delete-item\"} onClick={(e) => deletePost(`${val.id}`)}>â“§</div>\n            <h3 className={\"feed-title\"}>{ val.title }</h3>\n            <p className={\"feed-body\"}>{ val.content }</p>\n          </div>\n        ) }\n        <div className={\"feed-item-add\"}>\n          Title: <input type={\"text\"} value={SNewPostTitle} onChange={(e) => setSNewPostTitle(e.target.value)}/>\n          &nbsp;&nbsp;&nbsp;&nbsp;\n          Content: <input type={\"text\"} value={SNewPostContent} onChange={(e) => setSNewPostContent(e.target.value)}/>\n          <div className={\"post-add-button\"} onClick={(e) => createNewPost()}>Add Post!</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default FeedPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}